/* =========================
   Flag Party – Light / Pastel UI + Nouvelles règles LeFast
   ========================= */

   :root{
    /* Palette douce */
    --bg-start: #EAF6FF;   /* bleu très clair */
    --bg-end:   #F6EDFF;   /* violet très clair */
    --card-bg:  rgba(255,255,255,0.85);
    --card-border: rgba(255,255,255,0.65);
    --surface:  rgba(255,255,255,0.6);
  
    --text-main: #1f2937;  /* gris foncé */
    --text-soft: #334155;  /* gris foncé + doux */
  
    --primary:  #6D8BFF;   /* indigo doux */
    --accent:   #A078FF;   /* violet doux */
    --gold:     #f59e0b;
  
    --success:  #34d399;   /* menthe */
    --info:     #60a5fa;   /* bleu clair */
    --warning:  #fbbf24;   /* jaune doux */
    --danger:   #fb7185;   /* corail/rose */
  
    --shadow-lg: 0 12px 40px rgba(119, 101, 255, 0.18);
    --shadow-md: 0 8px 24px rgba(119, 101, 255, 0.16);
    --shadow-sm: 0 4px 14px rgba(119, 101, 255, 0.12);
    --blur: blur(12px);
  }
  
  /* Reset minimal */
  *{margin:0;padding:0;box-sizing:border-box}
  
  /* ======== PAGE ======== */
  body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
    background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    color: var(--text-main);
  }
  
  /* Conteneur principal en verre - TAILLE ÉQUILIBRÉE */
  .container{
    background: var(--card-bg);
    backdrop-filter: var(--blur);
    -webkit-backdrop-filter: var(--blur);
    border-radius:24px;
    padding:36px 32px;
    box-shadow: var(--shadow-lg);
    border:1px solid var(--card-border);
    max-width:1100px;
    width:94%;
    min-height:75vh;
    text-align:center;
  }
  
  /* Titre équilibré */
  h1{
    font-size:3.2rem;
    margin-bottom:28px;
    line-height:1.1;
    background: linear-gradient(45deg, #FFD86F, #FFA645);
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow:none;
  }
  
  /* Écrans */
  .screen{display:none}
  .screen.active{display:block}
  
  /* ======== BOUTONS ======== */
  .btn{
    background: linear-gradient(45deg, var(--primary), var(--accent));
    color:#fff;
    border:none;
    padding:14px 26px;
    margin:8px 10px;
    border-radius:18px;
    cursor:pointer;
    font-size:1.05rem;
    font-weight:700;
    transition:transform .18s ease, box-shadow .18s ease, opacity .18s;
    box-shadow: var(--shadow-sm);
  }
  .btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .btn:active{ transform: translateY(0); }
  .btn:disabled{ opacity:.55; cursor:not-allowed; }
  
  .btn-secondary{
    background: linear-gradient(45deg, #7BC9FF, #60A5FA);
  }
  .btn-danger{
    background: linear-gradient(45deg, #FF9AAC, #FB7185);
  }
  
  /* Inputs */
  input{
    padding:14px 16px;
    margin:8px 10px;
    border:1px solid rgba(99,102,241,0.25);
    border-radius:12px;
    font-size:1.05rem;
    text-align:center;
    background:#fff;
    color: var(--text-main);
    box-shadow: 0 2px 10px rgba(109,139,255,0.10);
    transition: border-color .2s ease, box-shadow .2s ease;
  }
  input:focus{
    outline:none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(109,139,255,0.18);
  }
  input:disabled{
    background: #f1f5f9;
    color: #94a3b8;
    cursor: not-allowed;
  }
  
  /* ======== SÉLECTEUR DE MODES ======== */
  .game-modes{
    display:flex;justify-content:center;gap:18px;margin:24px 0;flex-wrap:wrap
  }
  .game-mode-card{
    background: var(--surface);
    border:1px solid var(--card-border);
    border-radius:16px;
    padding:18px 16px;
    width:210px;
    cursor:pointer;
    transition: transform .22s ease, box-shadow .22s ease, background .22s ease, border-color .22s ease;
    position:relative;
    color: var(--text-main);
    box-shadow: var(--shadow-sm);
  }
  .game-mode-card:hover{
    transform: translateY(-4px);
    background: rgba(255,255,255,0.9);
    box-shadow: var(--shadow-md);
  }
  .game-mode-card.selected{
    border-color: rgba(245, 158, 11, 0.6);
    background: linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(255,247,230,0.9) 100%);
    box-shadow: 0 10px 30px rgba(245,158,11,0.24);
  }
  .game-mode-card h3{
    font-size:1.2rem;margin-bottom:8px;
    display:flex;align-items:center;justify-content:center;gap:10px;
    color: var(--text-soft);
  }
  .game-mode-card .mode-icon{ font-size:1.4rem; transition: transform .22s ease; }
  .game-mode-card:hover .mode-icon{ transform: scale(1.1); }
  .game-mode-card.selected .mode-icon{ color: var(--gold); }
  .game-mode-card p{ font-size:.95rem; opacity:.9; color: var(--text-main); }
  
  /* ======== DURÉE ======== */
  .game-duration-selector{ margin:18px 0; color: var(--text-soft); }
  .duration-options{
    display:flex;justify-content:center;gap:12px;margin-top:10px
  }
  .duration-btn{
    padding:10px 18px;
    background: rgba(255,255,255,0.8);
    border:1px solid rgba(99,102,241,0.25);
    border-radius:12px;
    color: var(--text-main);
    cursor:pointer;
    transition: all .2s ease;
    box-shadow: var(--shadow-sm);
  }
  .duration-btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .duration-btn.active{
    border-color: var(--gold);
    background: linear-gradient(180deg, #FFF6DB, #FFE8B6);
  }
  
  /* ======== SALLE D'ATTENTE ======== */
  .waiting-room{text-align:center;color: var(--text-main);}
  .room-code{
    font-size:1.9rem;font-weight:800;color: var(--gold);
    background: rgba(255,255,255,0.9);
    padding:12px 16px;border-radius:14px;margin:18px 0;
    border:1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  .players-list{
    background: var(--surface);
    border-radius:16px;
    padding:18px;
    margin:18px 0;
    border:1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  .player{
    display:flex;justify-content:space-between;align-items:center;
    padding:10px 12px;margin:6px 0;
    background: rgba(255,255,255,0.9);
    border:1px solid rgba(229,231,235,0.9);
    border-radius:10px;
    transition: transform .18s ease, box-shadow .18s ease;
    color: var(--text-main);
  }
  .player:hover{ transform: translateY(-2px); box-shadow: var(--shadow-sm); }
  .player-highlight{ animation: highlight 1s ease; }
  @keyframes highlight{0%,100%{transform:scale(1)}50%{transform:scale(1.03); background:#FFF3D6}}
  
  /* ======== DRAPEAU & INFOS - TAILLE ÉQUILIBRÉE ======== */
  .flag-container{ margin:25px 0; position:relative; }
  .flag-img{
    max-width:380px;width:100%;height:250px;object-fit:contain;
    border-radius:18px;
    box-shadow: 0 10px 32px rgba(109,139,255,0.22);
    background:#fff;padding:14px;
    animation: fadeIn .28s ease;
    border:1px solid #f1f5f9;
  }
  @keyframes fadeIn{from{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}
  
  .game-info{
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 25px;
    margin: 22px 0;
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--text-main);
  }
  
  /* Alignement spécifique pour chaque section */
  .lefast-attempts-info{
    justify-self: flex-start;
  }
  
  .lefast-timer-info{
    justify-self: center;
  }
  
  .score-display{
    justify-self: flex-end;
  }
  .score-display{
    font-size:1.3rem;padding:10px 14px;
    background: rgba(255,255,255,0.9);
    border-radius:12px;
    border:1px solid var(--card-border);
    position:relative;
    box-shadow: var(--shadow-sm);
  }
  
  /* ======== NOUVELLES RÈGLES LEFAST - TAILLE ÉQUILIBRÉE ======== */
  .lefast-attempts-info{
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 7px;
    min-width: 200px;
  }
  
  .attempts-display{
    font-size: 1.1rem;
    font-weight: 700;
    padding: 10px 14px;
    background: rgba(52, 211, 153, 0.15);
    border: 1px solid rgba(52, 211, 153, 0.3);
    border-radius: 13px;
    color: #059669;
    transition: all 0.3s ease;
    white-space: nowrap;
  }
  
  .attempts-display.no-attempts{
    background: rgba(251, 113, 133, 0.15);
    border-color: rgba(251, 113, 133, 0.3);
    color: #dc2626;
  }
  
  .attempts-display.correct-answer{
    background: rgba(34, 197, 94, 0.2);
    border-color: rgba(34, 197, 94, 0.4);
    color: #15803d;
    font-weight: 800;
    animation: correctAnswerPulse 0.6s ease;
  }
  
  @keyframes correctAnswerPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  
  .objective{
    font-size: 0.9rem;
    color: var(--text-soft);
    opacity: 0.8;
    white-space: nowrap;
  }
  
  /* Timer pour LeFast - TAILLE ÉQUILIBRÉE */
  .lefast-timer-info{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    min-width: 90px;
  }
  
  .question-timer{
    font-size: 1.9rem;
    font-weight: 800;
    padding: 14px 18px;
    border-radius: 14px;
    min-width: 70px;
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
  }
  
  .question-timer.normal{
    background: rgba(52, 211, 153, 0.15);
    border: 1px solid rgba(52, 211, 153, 0.3);
    color: #059669;
  }
  
  .question-timer.warning{
    background: rgba(251, 191, 36, 0.15);
    border: 1px solid rgba(251, 191, 36, 0.3);
    color: #d97706;
  }
  
  .question-timer.danger{
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #dc2626;
    animation: timerPulse 1s infinite;
  }
  
  @keyframes timerPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.12); }
  }
  
  .timer-label{
    font-size: 0.85rem;
    color: var(--text-soft);
    opacity: 0.8;
    white-space: nowrap;
  }
  
  .score-display{
    font-size: 1.25rem;padding: 11px 16px;
    background: rgba(255,255,255,0.9);
    border-radius:13px;
    border:1px solid var(--card-border);
    position:relative;
    box-shadow: var(--shadow-sm);
    min-width: 130px;
    text-align: center;
  }
  
  /* Historique des tentatives LeFast - TAILLE ÉQUILIBRÉE */
  .lefast-attempts-history{
    margin: 22px auto;
    padding: 18px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--card-border);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
    max-width: 450px;
  }
  
  .attempts-history-title{
    font-size: 1.05rem;
    font-weight: 700;
    color: var(--text-soft);
    margin-bottom: 14px;
    text-align: center;
  }
  
  .attempts-list{
    display: flex;
    flex-direction: column;
    gap: 9px;
  }
  
  .attempt-item{
    display: grid;
    grid-template-columns: 35px 1fr 35px;
    align-items: center;
    gap: 14px;
    padding: 11px 14px;
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.2s ease;
  }
  
  .attempt-item.correct-attempt{
    background: rgba(52, 211, 153, 0.15);
    border: 1px solid rgba(52, 211, 153, 0.3);
  }
  
  .attempt-item.incorrect-attempt{
    background: rgba(251, 113, 133, 0.15);
    border: 1px solid rgba(251, 113, 133, 0.3);
  }
  
  .attempt-number{
    font-weight: 700;
    color: var(--text-soft);
    text-align: center;
  }
  
  .attempt-answer{
    font-family: 'Courier New', monospace;
    font-weight: 600;
    color: var(--text-main);
    text-align: left;
    font-style: italic;
  }
  
  .attempt-status{
    font-size: 1.25rem;
    text-align: center;
  }
  
  .lefast-help{
    margin-top: 18px;
    padding: 14px;
    background: rgba(96, 165, 250, 0.1);
    border: 1px solid rgba(96, 165, 250, 0.2);
    border-radius: 13px;
    color: var(--text-soft);
    font-size: 0.95rem;
    text-align: center;
  }
  
  /* Historique des tentatives LeFast */
  .lefast-attempts-history{
    margin: 16px 0;
    padding: 16px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
  }
  
  .attempts-history-title{
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-soft);
    margin-bottom: 12px;
    text-align: center;
  }
  
  .attempts-list{
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .attempt-item{
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 0.95rem;
    transition: all 0.2s ease;
  }
  
  .attempt-item.correct-attempt{
    background: rgba(52, 211, 153, 0.15);
    border: 1px solid rgba(52, 211, 153, 0.3);
  }
  
  .attempt-item.incorrect-attempt{
    background: rgba(251, 113, 133, 0.15);
    border: 1px solid rgba(251, 113, 133, 0.3);
  }
  
  .attempt-number{
    font-weight: 700;
    color: var(--text-soft);
    width: 20px;
  }
  
  .attempt-answer{
    font-family: 'Courier New', monospace;
    font-weight: 600;
    color: var(--text-main);
    text-align: left;
    font-style: italic;
  }
  
  .attempt-status{
    font-size: 1.1rem;
  }
  
  /* Récapitulatif des résultats LeFast */
  .lefast-results-header{
    margin-bottom: 20px;
    padding: 16px;
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.2);
    border-radius: 12px;
  }
  
  .lefast-results-header h3{
    font-size: 1.4rem;
    color: var(--gold);
    margin-bottom: 8px;
  }
  
  .lefast-ranking{
    background: rgba(255, 255, 255, 0.9);
    border-radius: 16px;
    padding: 16px;
    margin: 16px 0;
    border: 1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  
  .ranking-item{
    display: grid;
    grid-template-columns: auto 1fr auto auto;
    gap: 12px;
    align-items: center;
    padding: 12px 16px;
    margin: 8px 0;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(229, 231, 235, 0.5);
    border-radius: 12px;
    transition: all 0.3s ease;
  }
  
  .ranking-item:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
  }
  
  .ranking-item.current-player{
    background: linear-gradient(90deg, rgba(52, 211, 153, 0.15), rgba(34, 197, 94, 0.1));
    border-color: rgba(52, 211, 153, 0.4);
    font-weight: 800;
  }
  
  .ranking-item .rank{
    font-size: 1.1rem;
    font-weight: 800;
    color: var(--gold);
  }
  
  .ranking-item .player-name{
    text-align: left;
    font-weight: 700;
    color: var(--text-main);
  }
  
  .ranking-item .points{
    font-weight: 800;
    color: var(--success);
  }
  
  .ranking-item .total-score{
    font-weight: 700;
    color: var(--text-soft);
  }
  
  .no-correct-answers{
    padding: 20px;
    font-style: italic;
    color: var(--text-soft);
    background: rgba(251, 113, 133, 0.1);
    border: 1px solid rgba(251, 113, 133, 0.2);
    border-radius: 12px;
  }
  
  .countdown-section{
    margin-top: 20px;
    padding: 16px;
    background: rgba(96, 165, 250, 0.1);
    border: 1px solid rgba(96, 165, 250, 0.2);
    border-radius: 12px;
  }
  
  /* ======== TIMER (Conservé pour LeFist) ======== */
  .circular-timer{ position:relative; width:84px; height:84px; }
  .circular-timer svg{ width:84px; height:84px; transform: rotate(-90deg); }
  .timer-circle{ fill:none; stroke: rgba(148,163,184,0.3); stroke-width:8; }
  .timer-progress{ fill:none; stroke: var(--gold); stroke-width:8; stroke-linecap: round; transition: stroke-dashoffset 1s linear; }
  .timer-text{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:1.25rem; font-weight:800; color: var(--text-main); }
  
  /* ======== ENTRE QUESTIONS ======== */
  .between-questions{
    background: linear-gradient(180deg,#FFF8E1, #FFE9B5);
    border:1px solid #fde68a;
    border-radius:16px; padding:18px; margin:18px 0;
    font-size:1.1rem; font-weight:800; color:#92400e;
    box-shadow: var(--shadow-sm);
  }
  .winner-display{font-size:1.3rem;margin:8px 0}
  .countdown{font-size:1.6rem;color:#b45309;margin:6px 0}
  
  /* ======== LEDREAM ======== */
  #ledreamScreen{
    background: linear-gradient(135deg, rgba(216,230,ff,.25) 0%, rgba(232,222,255,.25) 100%);
    border-radius:16px; padding-top:6px;
  }
  .ledream-timer-container{ display:flex; flex-direction:column; align-items:center; gap:8px; }
  .ledream-timer-bar{
    width:220px; height:10px; background: rgba(148,163,184,0.25);
    border-radius:6px; overflow:hidden; border:1px solid rgba(148,163,184,0.35);
  }
  .ledream-timer-progress{
    height:100%; background: linear-gradient(90deg, #86EFAC, #60A5FA);
    width:100%; transition: width .1s linear; border-radius:6px;
  }
  .ledream-timer-text{ font-size:1.4rem; font-weight:800; color: var(--text-main); }
  
  .ledream-dashboard{
    background: rgba(255,255,255,0.9);
    border-radius:16px; padding:18px; margin:18px 0;
    border:1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
    color: var(--text-main);
  }
  .dashboard-players{ display:flex; justify-content:space-around; gap:16px; flex-wrap:wrap; }
  .dashboard-player{
    background: rgba(255,255,255,0.95);
    border-radius:12px; padding:12px 14px; text-align:center; min-width:160px;
    border:1px solid #eef2f7; box-shadow: var(--shadow-sm);
  }
  .dashboard-player-name{ font-weight:800; font-size:1rem; margin-bottom:4px; color: var(--text-soft); }
  .dashboard-player-score{ font-size:1.1rem; color: var(--gold); margin-bottom:4px; }
  .dashboard-player-result{ font-size:1.8rem; margin-top:2px; }
  
  .ledream-answer-interface{ margin:26px 0; }
  .ledream-input-section{ display:flex; flex-direction:column; align-items:center; gap:10px; margin-bottom:16px; }
  .ledream-input-section input{ width:320px; }
  .ledream-points-indicator{
    font-size:1rem; font-weight:800; color:#16a34a;
    background: #ECFDF5; padding:6px 14px; border-radius:999px;
    border:1px solid #BBF7D0;
  }
  
  .ledream-help-buttons{ display:flex; justify-content:center; gap:16px; flex-wrap:wrap; }
  .ledream-help-btn{
    background: linear-gradient(45deg, #7BC9FF, #60A5FA);
    padding:14px 22px; font-size:1rem; min-width:140px;
  }
  .ledream-help-btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .ledream-help-btn:disabled{ opacity:.55; cursor:not-allowed; transform:none; }
  
  .answer-options{ display:grid; grid-template-columns:1fr 1fr; gap:14px; margin:18px 0; }
  .ledream-answer-options.mode-carre{ grid-template-columns:1fr 1fr; }
  .ledream-answer-options.mode-fifty{ grid-template-columns:1fr 1fr; }
  .ledream-answer-btn{
    padding:14px; background:#fff;
    border:1px solid #e5e7eb; border-radius:12px;
    color: var(--text-main); cursor:pointer; transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    font-size:1.05rem; font-weight:700; box-shadow: var(--shadow-sm);
  }
  .ledream-answer-btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: #cbd5e1; }
  .ledream-answer-btn.correct{ background:#ECFDF5; border-color:#86EFAC; }
  .ledream-answer-btn.incorrect{ background:#FEF2F2; border-color:#FCA5A5; }
  
  /* Feedback (cartes claires, plus de noir) */
  .ledream-feedback{
    position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    background:#ffffff; color: var(--text-main);
    padding:18px 22px; border-radius:16px; font-size:1.05rem; font-weight:800;
    z-index:1000; display:none; text-align:center;
    border:1px solid #e5e7eb; box-shadow: var(--shadow-md);
  }
  .ledream-feedback.correct{ border-color:#86EFAC; }
  .ledream-feedback.incorrect{ border-color:#FCA5A5; }
  .ledream-feedback.show{ display:block; animation: feedbackPulse 1.2s ease forwards; }
  @keyframes feedbackPulse{
    0%{opacity:0; transform:translate(-50%,-50%) scale(.92)}
    20%{opacity:1; transform:translate(-50%,-50%) scale(1.03)}
    80%{opacity:1; transform:translate(-50%,-50%) scale(1)}
    100%{opacity:0; transform:translate(-50%,-50%) scale(.97)}
  }
  .speed-bonus-display{ color: var(--gold); font-size:.95rem; margin-top:4px; }
  
  /* ======== LEFIST NOUVEAU CONCEPT ======== */
  #lefistScreen{
    background: linear-gradient(135deg, #E3F9F1 0%, #E9F2FF 100%);
    border-radius:16px; padding: 20px;
  }
  
  .lefist-game-header{
    display:flex; justify-content:space-between; align-items:center;
    padding:16px 20px; background: rgba(255,255,255,0.8);
    border-radius:16px; margin-bottom: 20px; backdrop-filter: var(--blur);
    border:1px solid var(--card-border); box-shadow: var(--shadow-sm);
  }
  
  .lefist-timer,.lefist-score{
    background:#fff; padding:10px 16px; border-radius:12px; font-weight:800; color: var(--text-main);
    box-shadow: var(--shadow-sm); border:1px solid #eef2f7; font-size: 1.1rem;
  }
  
  .lefist-stats{
    display: flex; gap: 12px; align-items: center;
  }
  
  .lefist-stat{
    background:#fff; padding:8px 12px; border-radius:10px; font-weight:700; font-size: 0.95rem;
    box-shadow: var(--shadow-sm); border:1px solid #eef2f7;
  }
  
  .lefist-stat.correct{ color: #16a34a; }
  .lefist-stat.incorrect{ color: #dc2626; }
  
  .lefist-stats.danger .lefist-stat.incorrect{
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    animation: dangerPulse 2s infinite;
  }
  
  @keyframes dangerPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  
  .lefist-game-content{
    text-align: center;
  }
  
  .lefist-flag-display{
    margin: 30px 0;
  }
  
  .lefist-flag-img{
    max-width: 350px; width: 100%; height: 230px; object-fit: contain;
    border-radius: 18px; box-shadow: 0 10px 32px rgba(109,139,255,0.22);
    background: #fff; padding: 14px; border: 1px solid #f1f5f9;
  }
  
  .lefist-continent-buttons{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .lefist-continent-btn{
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,250,252,0.8));
    color: var(--text-main); border: 2px solid #e2e8f0; padding: 16px 20px; border-radius: 16px;
    cursor: pointer; font-size: 1rem; font-weight: 700;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    display: flex; flex-direction: column; align-items: center; gap: 8px;
    position: relative; overflow: hidden;
  }
  
  .lefist-continent-btn:hover{
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
    background: linear-gradient(135deg, #fff, #f8fafc);
  }
  
  .lefist-continent-btn:active{
    transform: translateY(-1px);
    background: linear-gradient(45deg, var(--primary), var(--accent));
    color: #fff;
  }
  
  .continent-image{
    width: 60px;
    height: 45px;
    border-radius: 8px;
    position: relative;
    background: #e2e8f0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }
  
  /* Formes stylisées des continents */
  .europe-map{
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    clip-path: polygon(20% 10%, 80% 5%, 95% 30%, 85% 80%, 60% 90%, 15% 85%, 5% 40%);
  }
  
  .europe-map::before{
    content: '';
    position: absolute;
    width: 12px; height: 8px;
    background: rgba(255,255,255,0.8);
    border-radius: 2px;
    top: 15px; left: 20px;
  }
  
  .asia-map{
    background: linear-gradient(135deg, #f59e0b, #d97706);
    clip-path: polygon(10% 15%, 90% 0%, 100% 25%, 95% 60%, 80% 85%, 20% 90%, 0% 45%);
  }
  
  .asia-map::before{
    content: '';
    position: absolute;
    width: 8px; height: 6px;
    background: rgba(255,255,255,0.8);
    border-radius: 1px;
    top: 20px; right: 15px;
  }
  
  .america-map{
    background: linear-gradient(135deg, #10b981, #059669);
    clip-path: polygon(30% 0%, 50% 10%, 40% 40%, 60% 70%, 45% 100%, 25% 85%, 15% 50%, 20% 20%);
  }
  
  .america-map::before{
    content: '';
    position: absolute;
    width: 6px; height: 10px;
    background: rgba(255,255,255,0.8);
    border-radius: 1px;
    top: 8px; left: 18px;
  }
  
  .africa-map{
    background: linear-gradient(135deg, #dc2626, #991b1b);
    clip-path: polygon(40% 5%, 60% 8%, 80% 30%, 85% 70%, 60% 95%, 35% 90%, 25% 60%, 30% 25%);
  }
  
  .africa-map::before{
    content: '';
    position: absolute;
    width: 10px; height: 4px;
    background: rgba(255,255,255,0.8);
    border-radius: 2px;
    top: 10px; left: 22px;
  }
  
  .oceania-map{
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    clip-path: polygon(20% 40%, 80% 35%, 85% 65%, 60% 80%, 25% 75%);
  }
  
  .oceania-map::before{
    content: '';
    position: absolute;
    width: 4px; height: 3px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    top: 18px; left: 35px;
  }
  
  .oceania-map::after{
    content: '';
    position: absolute;
    width: 3px; height: 2px;
    background: rgba(255,255,255,0.7);
    border-radius: 50%;
    top: 25px; left: 20px;
  }
  
  .other-map{
    background: linear-gradient(135deg, #64748b, #475569);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .other-map::before{
    content: '?';
    color: white;
    font-size: 18px;
    font-weight: 800;
  }
  
  .continent-name{
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-main);
    transition: color 0.3s ease;
  }
  
  .lefist-continent-btn:hover .continent-image{
    transform: scale(1.1);
  }
  
  .lefist-continent-btn:active .continent-name{
    color: #fff;
  }
  
  .lefist-continent-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
    pointer-events: none;
  }
  
  .lefist-continent-btn:disabled .continent-image {
    transform: none !important;
    opacity: 0.7;
  }
  
  /* Écran de fin LeFist */
  .lefist-finished-screen{
    text-align: center;
    padding: 40px 20px;
  }
  
  .lefist-finished-content h3{
    font-size: 1.5rem;
    margin-bottom: 20px;
    color: var(--text-main);
  }
  
  .lefist-final-stats{
    background: rgba(255,255,255,0.9);
    border-radius: 16px;
    padding: 20px;
    margin: 20px auto;
    max-width: 400px;
    border: 1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  
  .stat-item{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #f1f5f9;
  }
  
  .stat-item:last-child{
    border-bottom: none;
  }
  
  .stat-label{
    font-weight: 600;
    color: var(--text-soft);
  }
  
  .stat-value{
    font-weight: 800;
    font-size: 1.1rem;
  }
  
  .stat-value.correct{ color: #16a34a; }
  .stat-value.incorrect{ color: #dc2626; }
  .stat-value.score{ color: var(--gold); }
  
  .waiting-message{
    margin-top: 20px;
    font-style: italic;
    color: var(--text-soft);
  }
  
  /* Dashboard universel */
  .dashboard-container{
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .dashboard-ranking{
    background: rgba(255,255,255,0.9);
    border-radius: 16px;
    padding: 20px;
    margin: 20px 0;
    border: 1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  
  .dashboard-player{
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 16px;
    padding: 12px 16px;
    margin: 8px 0;
    background: rgba(255,255,255,0.7);
    border: 1px solid #f1f5f9;
    border-radius: 12px;
    transition: transform 0.2s ease;
  }
  
  .dashboard-player:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
  }
  
  .dashboard-player.current-player{
    background: linear-gradient(90deg, rgba(52, 211, 153, 0.15), rgba(34, 197, 94, 0.1));
    border-color: rgba(52, 211, 153, 0.4);
    font-weight: 800;
  }
  
  .player-rank{
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--gold);
  }
  
  .player-name{
    text-align: left;
    font-weight: 700;
    color: var(--text-main);
  }
  
  .player-score{
    font-weight: 800;
    color: var(--text-soft);
  }
  
  .dashboard-actions{
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-top: 20px;
  }   /* Feedback LeFist */
  .lefist-feedback{
    position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    background:#ffffff; color: var(--text-main);
    padding:18px 22px; border-radius:16px; font-size:1.25rem; font-weight:800; z-index:1000; display:none; text-align:center;
    border:1px solid #e5e7eb; box-shadow: var(--shadow-md);
  }
  .lefist-feedback.correct{ border-color:#86EFAC; }
  .lefist-feedback.incorrect{ border-color:#FCA5A5; }
  .lefist-feedback.show{ display:block; animation: feedbackPulse 1s ease forwards; }
  
  /* ======== NOTIFS & STATUT ======== */
  .connection-status{
    position:fixed; top:20px; right:20px; padding:10px 14px; border-radius:999px;
    font-size:.95rem; font-weight:800; background: rgba(255,255,255,0.85);
    color: var(--text-main); border:1px solid var(--card-border);
    box-shadow: var(--shadow-sm);
  }
  .connection-status.connected{
    background: linear-gradient(90deg, #E6FFFA, #ECFDF5);
    border-color: #BBF7D0;
  }
  
  .notification{
    background: linear-gradient(90deg, #E6FFFA, #ECFDF5);
    color:#065f46;
    padding:12px 16px; border-radius:12px; margin:10px 0; display:none;
    animation: slideIn .25s ease; border:1px solid #BBF7D0; box-shadow: var(--shadow-sm);
  }
  @keyframes slideIn{from{transform:translateY(-10px);opacity:0}to{transform:translateY(0);opacity:1}}
  .notification.error{
    background: linear-gradient(90deg, #FFF1F2, #FFE4E6);
    color:#7f1d1d; border-color:#FCA5A5;
  }
  .notification.show{ display:block; }
  
  /* ======== ACCESSIBILITÉ ======== */
  button:focus-visible, .duration-btn:focus-visible, .ledream-answer-btn:focus-visible, .game-mode-card:focus-visible{
    outline: none;
    box-shadow: 0 0 0 4px rgba(96,165,250,0.35);
  }
  
  /* ======== RESPONSIVE - ÉQUILIBRÉ POUR TOUS ÉCRANS ======== */
  @media (max-width: 1300px) {
    .container {
      max-width: 950px;
      padding: 30px 26px;
    }
    
    .flag-img {
      max-width: 340px;
      height: 220px;
    }
    
    .lefist-flag-img {
      max-width: 320px;
      height: 210px;
    }
    
    h1 {
      font-size: 3rem;
    }
  }
  
  @media (max-width: 1000px) {
    .container {
      max-width: 800px;
      padding: 28px 24px;
    }
    
    .flag-img {
      max-width: 320px;
      height: 200px;
    }
    
    .lefist-flag-img {
      max-width: 300px;
      height: 190px;
    }
    
    .game-info {
      gap: 20px;
      font-size: 1.1rem;
    }
    
    .question-timer {
      font-size: 1.7rem;
      padding: 12px 16px;
    }
    
    .lefist-continent-buttons {
      grid-template-columns: repeat(2, 1fr);
      max-width: 400px;
    }
  }
  
  @media (max-width: 768px){
    .container {
      width: 95%;
      padding: 22px 18px;
      min-height: auto;
    }
    
    h1 {
      font-size: 2.4rem;
      margin-bottom: 18px;
    }
    
    .flag-img {
      max-width: 260px;
      height: 170px;
      padding: 10px;
    }
    
    .lefist-flag-img {
      max-width: 240px;
      height: 160px;
      padding: 10px;
    }
    
    .game-modes{ flex-direction:column; align-items:center; }
    .answer-options{ grid-template-columns:1fr; }
    .ledream-input-section input{ width:260px; }
    .ledream-help-buttons{ flex-direction:column; align-items:center; }
    
    /* LeFast responsive */
    .game-info{
      grid-template-columns: 1fr;
      gap: 12px;
      text-align: center;
      font-size: 1rem;
    }
    
    .question-timer {
      font-size: 1.6rem;
      padding: 10px 14px;
    }
    
    .attempts-display {
      font-size: 0.95rem;
      padding: 8px 12px;
    }
    
    .score-display {
      font-size: 1.1rem;
      padding: 9px 12px;
    }
    
    .lefast-attempts-info,
    .lefast-timer-info,
    .score-display{
      justify-self: center;
    }
    
    .lefast-attempts-info{
      align-items: center;
    }
    
    input {
      min-width: auto;
      width: 85%;
      font-size: 1rem;
      padding: 12px 16px;
    }
    
    .btn {
      font-size: 1rem;
      padding: 12px 24px;
    }
    
    .ranking-item{
      grid-template-columns: 1fr;
      gap: 6px;
      text-align: center;
    }
    
    .ranking-item .rank,
    .ranking-item .player-name,
    .ranking-item .points,
    .ranking-item .total-score{
      text-align: center;
    }
    
    .lefast-attempts-history{
      margin: 14px 8px;
      max-width: none;
      padding: 14px;
    }
    
    .attempt-item {
      grid-template-columns: 28px 1fr 28px;
      font-size: 0.9rem;
      padding: 8px 10px;
    }
    
    /* LeFist responsive */
    .lefist-game-header {
      flex-direction: column;
      gap: 10px;
      padding: 12px 16px;
    }
    
    .lefist-stats {
      gap: 8px;
    }
    
    .lefist-continent-buttons {
      grid-template-columns: 1fr;
      gap: 12px;
      max-width: 280px;
    }
    
    .lefist-continent-btn {
      padding: 12px 16px;
      font-size: 0.9rem;
    }
    
    .continent-image {
      width: 50px;
      height: 38px;
    }
    
    .continent-name {
      font-size: 0.8rem;
    }
    
    .dashboard-player {
      grid-template-columns: 1fr;
      gap: 8px;
      text-align: center;
    }
    
    .dashboard-actions {
      flex-direction: column;
      align-items: center;
    }
  }
  
  /* ======== Anim bonus score ======== */
  .score-bonus{
    color:#16a34a; font-weight:800; animation: bonusFloat 1s ease forwards;
  }
  @keyframes bonusFloat{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-18px);opacity:0}}
  
  /* ======== Infos spécifiques aux modes ======== */
  .lefast-info, .ledream-info{
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.2);
    border-radius: 12px;
    padding: 12px;
    margin-top: 12px;
  }
  
  .lefast-info p, .ledream-info p{
    margin: 0;
    font-size: 0.95rem;
    line-height: 1.4;
  }

/* ======== LERYTHM STYLES ======== */
.lerythm-game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 20px;
  height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.lerythm-score {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.lerythm-combo {
  font-size: 1.2rem;
  color: #fbbf24;
  font-weight: bold;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.lerythm-combo.active {
  animation: pulse 0.5s ease-in-out;
}

.lerythm-multiplier {
  font-size: 1.1rem;
  color: #34d399;
  font-weight: bold;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.lerythm-lanes {
  display: flex;
  justify-content: center;
  gap: 8px;
  height: 500px;
  position: relative;
  margin: 20px 0;
}

.lerythm-lane {
  width: 60px;
  height: 100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
  border: 2px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  position: relative;
  overflow: hidden;
}

.lerythm-hit-zone {
  position: absolute;
  bottom: 20px;
  left: 0;
  right: 0;
  height: 60px;
  background: rgba(255,255,255,0.2);
  border: 2px solid rgba(255,255,255,0.5);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  color: white;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.lerythm-hit-zone.hit {
  background: rgba(52, 211, 153, 0.5);
  animation: hitFlash 0.3s ease-out;
}

.lerythm-flag {
  position: absolute;
  width: 50px;
  height: 30px;
  left: 50%;
  transform: translateX(-50%);
  animation: fallDown 3s linear forwards;
  z-index: 10;
}

.lerythm-flag img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 4px;
  border: 1px solid rgba(255,255,255,0.3);
}

@keyframes fallDown {
  from {
    top: -50px;
  }
  to {
    top: 520px;
  }
}

@keyframes hitFlash {
  0% { background: rgba(52, 211, 153, 0.8); }
  100% { background: rgba(255,255,255,0.2); }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.lerythm-feedback {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 2rem;
  font-weight: bold;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  opacity: 0;
  pointer-events: none;
  z-index: 1000;
}

.lerythm-feedback.show {
  animation: feedbackShow 1s ease-out;
}

.lerythm-feedback.perfect {
  color: #10b981;
}

.lerythm-feedback.good {
  color: #f59e0b;
}

.lerythm-feedback.ok {
  color: #6b7280;
}

.lerythm-feedback.miss {
  color: #ef4444;
}

@keyframes feedbackShow {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
}

.lerythm-game-over-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.8);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  z-index: 1000;
}

.lerythm-final-score {
  font-size: 2rem;
  font-weight: bold;
  margin: 20px 0;
  color: #fbbf24;
}

.lerythm-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin: 20px 0;
  text-align: center;
}

.lerythm-stats div {
  background: rgba(255,255,255,0.1);
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.2);
}

  .lerythm-game-header {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 40px;
    align-items: center;
    z-index: 100;
  }

  .lerythm-score-display {
    background: rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    font-weight: 800;
    font-size: 1.2rem;
  }

  .lerythm-combo-display {
    background: linear-gradient(45deg, #ff6b6b, #ee5a52);
    padding: 8px 16px;
    border-radius: 15px;
    font-weight: 700;
    font-size: 1rem;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.3s ease;
  }

  .lerythm-combo-display.active {
    opacity: 1;
    transform: scale(1);
  }

  .lerythm-multiplier {
    position: absolute;
    top: 80px;
    right: 30px;
    background: linear-gradient(45deg, #feca57, #ff9ff3);
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 800;
    color: #2c2c2c;
    box-shadow: 0 4px 15px rgba(254, 202, 87, 0.3);
  }

  .lerythm-lanes {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
  }

  .lerythm-lane {
    width: 80px;
    height: 100%;
    position: relative;
    border-left: 2px solid rgba(255, 255, 255, 0.3);
    background: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.05) 100%);
  }

  .lerythm-lane:last-child {
    border-right: 2px solid rgba(255, 255, 255, 0.3);
  }

  .lerythm-hit-zone {
    position: absolute;
    bottom: 60px;
    width: 100%;
    height: 80px;
    background: linear-gradient(45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
    border: 3px solid rgba(255, 255, 255, 0.4);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: transparent;
    text-shadow: none;
    user-select: none;
  }

  .lerythm-hit-zone.hit {
    background: linear-gradient(45deg, #4ecdc4, #44a08d);
    border-color: #4ecdc4;
    transform: scale(1.1);
    box-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
    animation: lerythmHitEffect 0.3s ease;
  }

  @keyframes lerythmHitEffect {
    0% { transform: scale(1.1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1.1); }
  }

  .lerythm-falling-flag {
    position: absolute;
    width: 70px;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    animation: lerythmFall linear;
    cursor: pointer;
  }

  .lerythm-flag-container {
    background: white;
    border-radius: 12px;
    padding: 4px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    border: 2px solid rgba(255, 255, 255, 0.8);
  }

  .lerythm-flag-img {
    width: 100%;
    height: 45px;
    object-fit: cover;
    border-radius: 8px;
  }

  @keyframes lerythmFall {
    from { top: -100px; }
    to { top: 100vh; }
  }

  .lerythm-feedback {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2rem;
    font-weight: 800;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    opacity: 0;
    pointer-events: none;
    z-index: 200;
  }

  .lerythm-feedback.show {
    animation: lerythmFeedbackPulse 1s ease;
  }

  @keyframes lerythmFeedbackPulse {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
  }

  .lerythm-feedback.perfect { color: #f39c12; text-shadow: 0 0 20px #f39c12; }
  .lerythm-feedback.good { color: #2ecc71; text-shadow: 0 0 20px #2ecc71; }
  .lerythm-feedback.ok { color: #3498db; text-shadow: 0 0 20px #3498db; }
  .lerythm-feedback.miss { color: #e74c3c; text-shadow: 0 0 20px #e74c3c; }

  .lerythm-game-over-screen {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }

  .lerythm-final-score {
    font-size: 2.5rem;
    margin-bottom: 20px;
    color: #f39c12;
  }

  .lerythm-stats {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    text-align: center;
  }

  .lerythm-stats div {
    margin: 5px 0;
    font-size: 1.1rem;
  }

/* ===============================
   LERYTHM IMPROVED STYLES
   =============================== */

/* Enhanced Game Container */
#lerythmScreen .lerythm-game-container {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
}

/* Enhanced Game Header */
#lerythmScreen .lerythm-game-header {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 40px;
  align-items: center;
  z-index: 100;
}

#lerythmScreen .lerythm-score-display {
  background: rgba(255,255,255,0.25);
  padding: 12px 24px;
  border-radius: 25px;
  backdrop-filter: blur(15px);
  font-weight: 800;
  font-size: 1.3rem;
  box-shadow: 0 8px 32px rgba(0,0,0,0.1);
}

#lerythmScreen .lerythm-combo-display {
  background: linear-gradient(45deg, #ff6b6b, #ee5a52);
  padding: 10px 20px;
  border-radius: 20px;
  font-weight: 700;
  font-size: 1.1rem;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.4s ease;
  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
}

#lerythmScreen .lerythm-combo-display.active {
  opacity: 1;
  transform: scale(1);
  animation: comboPulse 0.6s ease;
}

@keyframes comboPulse {
  0% { transform: scale(0.8); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

#lerythmScreen .lerythm-multiplier {
  position: fixed;
  top: 85px;
  right: 30px;
  background: linear-gradient(45deg, #feca57, #ff9ff3);
  padding: 12px 20px;
  border-radius: 25px;
  font-weight: 900;
  font-size: 1.1rem;
  color: #2c2c2c;
  box-shadow: 0 8px 25px rgba(254, 202, 87, 0.4);
}

/* Enhanced Lanes */
#lerythmScreen .lerythm-lanes {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 6px;
  padding: 0 20px;
}

#lerythmScreen .lerythm-lane {
  width: 95px;
  height: 100vh;
  position: relative;
  background: linear-gradient(to bottom, 
    rgba(255,255,255,0.03) 0%, 
    rgba(255,255,255,0.08) 70%, 
    rgba(255,255,255,0.15) 100%);
  border: 2px solid rgba(255,255,255,0.25);
  border-radius: 15px 15px 0 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  overflow: hidden;
  backdrop-filter: blur(5px);
}

#lerythmScreen .lerythm-hit-zone {
  width: 85px;
  height: 85px;
  background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.2));
  border: 4px solid rgba(255,255,255,0.6);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0; /* Hide letters */
  font-weight: 900;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
  margin-bottom: 25px;
  position: relative;
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  transition: all 0.3s ease;
}

#lerythmScreen .lerythm-hit-zone.hit {
  background: linear-gradient(45deg, #4ecdc4, #44a08d);
  border-color: #4ecdc4;
  transform: scale(1.2);
  box-shadow: 0 0 30px rgba(78, 205, 196, 0.9);
  animation: lerythmEnhancedHit 0.5s ease;
}

@keyframes lerythmEnhancedHit {
  0% { transform: scale(1.2); box-shadow: 0 0 30px rgba(78, 205, 196, 0.9); }
  25% { transform: scale(1.3); box-shadow: 0 0 40px rgba(78, 205, 196, 1); }
  75% { transform: scale(1.25); box-shadow: 0 0 35px rgba(78, 205, 196, 0.95); }
  100% { transform: scale(1.2); box-shadow: 0 0 30px rgba(78, 205, 196, 0.9); }
}

/* Enhanced Falling Flags */
#lerythmScreen .lerythm-flag {
  position: absolute;
  width: 80px;
  top: -120px;
  left: 50%;
  transform: translateX(-50%);
  animation: enhancedFallDown linear;
  cursor: pointer;
  z-index: 10;
}

#lerythmScreen .lerythm-flag img {
  width: 100%;
  height: 55px;
  object-fit: cover;
  border-radius: 10px;
  display: block;
  background: white;
  padding: 3px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
  border: 3px solid rgba(255,255,255,0.95);
  transition: transform 0.2s ease;
}

#lerythmScreen .lerythm-flag:hover img {
  transform: scale(1.05);
}

@keyframes enhancedFallDown {
  from { top: -120px; }
  to { top: calc(100vh - 110px); }
}

/* Enhanced Feedback */
#lerythmScreen .lerythm-feedback {
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  font-weight: 900;
  text-shadow: 4px 4px 8px rgba(0,0,0,0.8);
  opacity: 0;
  pointer-events: none;
  z-index: 200;
}

#lerythmScreen .lerythm-feedback.show {
  animation: lerythmEnhancedFeedback 1.4s ease;
}

@keyframes lerythmEnhancedFeedback {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3) rotate(-10deg); }
  10% { opacity: 1; transform: translate(-50%, -50%) scale(1.4) rotate(5deg); }
  20% { transform: translate(-50%, -50%) scale(1.2) rotate(-2deg); }
  30% { transform: translate(-50%, -50%) scale(1.1) rotate(1deg); }
  80% { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(0.7) rotate(0deg); }
}

#lerythmScreen .lerythm-feedback.perfect { 
  color: #f39c12; 
  text-shadow: 0 0 30px #f39c12, 4px 4px 8px rgba(0,0,0,0.8); 
}
#lerythmScreen .lerythm-feedback.good { 
  color: #2ecc71; 
  text-shadow: 0 0 30px #2ecc71, 4px 4px 8px rgba(0,0,0,0.8); 
}
#lerythmScreen .lerythm-feedback.ok { 
  color: #3498db; 
  text-shadow: 0 0 30px #3498db, 4px 4px 8px rgba(0,0,0,0.8); 
}
#lerythmScreen .lerythm-feedback.miss { 
  color: #e74c3c; 
  text-shadow: 0 0 30px #e74c3c, 4px 4px 8px rgba(0,0,0,0.8); 
}

/* Enhanced Game Over Screen */
#lerythmScreen .lerythm-game-over-screen {
  background: rgba(0,0,0,0.95);
  backdrop-filter: blur(10px);
}

#lerythmScreen .lerythm-game-over-screen h2 {
  font-size: 3rem;
  margin-bottom: 25px;
  background: linear-gradient(45deg, #f39c12, #e67e22);
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

#lerythmScreen .lerythm-final-score {
  font-size: 2.8rem;
  margin-bottom: 30px;
  color: #f39c12;
  font-weight: 900;
  text-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
}

#lerythmScreen .lerythm-stats {
  background: rgba(255,255,255,0.15);
  padding: 30px;
  border-radius: 25px;
  margin-bottom: 30px;
  text-align: center;
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255,255,255,0.2);
}

#lerythmScreen .lerythm-stats div {
  margin: 10px 0;
  font-size: 1.2rem;
  font-weight: 600;
}

/* Responsive Enhancements */
@media (max-width: 768px) {
  #lerythmScreen .lerythm-lane {
    width: 75px;
  }
  
  #lerythmScreen .lerythm-hit-zone {
    width: 65px;
    height: 65px;
  }
  
  #lerythmScreen .lerythm-flag {
    width: 65px;
  }
  
  #lerythmScreen .lerythm-game-header {
    gap: 20px;
    font-size: 0.9rem;
  }
  
  #lerythmScreen .lerythm-feedback {
    font-size: 2.2rem;
  }
}